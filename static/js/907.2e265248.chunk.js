"use strict";(self.webpackChunkhotel_app_client=self.webpackChunkhotel_app_client||[]).push([[907],{6242:function(e,t,n){n.r(t),n.d(t,{default:function(){return p}});var a=n(4165),r=n(1413),c=n(5861),s=n(9439),i=n(2791),l=n(515),o=n(2481),u=n(4373),d=(n(4676),n(4432),n(5880),n(9329)),m=n(6605),h=n(184);m.ZP.use([m.W_,m.tl,m.pt]);var p=function(){var e=(0,i.useState)([]),t=(0,s.Z)(e,2),n=t[0],m=t[1],p=(0,i.useState)(null),x=(0,s.Z)(p,2),f=x[0],v=x[1],j=(0,i.useState)(null),g=(0,s.Z)(j,2),N=g[0],k=g[1],y=(0,i.useState)(!1),b=(0,s.Z)(y,2),C=b[0],Z=b[1],D=(0,i.useState)(""),w=(0,s.Z)(D,2),E=w[0],S=w[1],I=(0,i.useState)(""),P=(0,s.Z)(I,2),T=P[0],R=P[1],J=(0,i.useState)("NotApproved"),q=(0,s.Z)(J,1)[0],B=(0,i.useState)(null),F=(0,s.Z)(B,2),L=F[0],_=F[1],U=(0,i.useState)(""),A=(0,s.Z)(U,2),O=(A[0],A[1]),V=(0,i.useState)(0),z=(0,s.Z)(V,2),M=z[0],Q=z[1],W=(0,i.useState)(0),G=(0,s.Z)(W,2),H=G[0],K=G[1],X=(0,i.useState)(!1),Y=(0,s.Z)(X,2),$=Y[0],ee=Y[1],te=(0,i.useState)(!1),ne=(0,s.Z)(te,2),ae=ne[0],re=ne[1],ce=(0,i.useRef)(null);(0,i.useEffect)((function(){var e=function(){var e=(0,c.Z)((0,a.Z)().mark((function e(){var t,n,c,s,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=(0,o.hJ)(l.db,"rooms"),e.next=4,(0,o.PL)(t);case 4:return n=e.sent,c=n.docs.map((function(e){return(0,r.Z)({id:e.id},e.data())})),m(c),s=(0,o.hJ)(l.db,"headerCarouselImages"),i=(0,o.qs)(l.db),c.forEach((function(e){var t=e.images[0],n=(0,o.JU)(s);i.set(n,{image:t})})),e.next=12,i.commit();case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),console.log("Error fetching rooms:",e.t0),v("Error fetching rooms");case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}();e()}),[]),(0,i.useEffect)((function(){var e=function(){var e=(0,c.Z)((0,a.Z)().mark((function e(){var t,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!l.I.currentUser){e.next=7;break}return t=(0,o.JU)(l.db,"users",l.I.currentUser.uid),e.next=5,(0,o.QT)(t);case 5:(n=e.sent).exists()&&(_(n.data()),O(n.data().email));case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("Error fetching user profile:",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();e()}),[]);var se=function(){k(null),Z(!1),S(""),R(""),Q(0),re(!1),v(null)},ie=function(){var e=(0,c.Z)((0,a.Z)().mark((function e(){var t,n,r,c,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=document.getElementById("cardNumber").value,n=document.getElementById("cardName").value,r=document.getElementById("expiryDate").value,c=document.getElementById("cvv").value,t&&n&&r&&c){e.next=7;break}return v("Please fill in all the payment details."),e.abrupt("return");case 7:return e.prev=7,e.next=10,(0,o.ET)((0,o.hJ)(l.db,"payments"),{email:L.email,room:N,checkInDate:E,checkOutDate:T,totalPrice:M,cardNumber:t,cardName:n,expiryDate:r,cvv:c,timestamp:(new Date).getTime(),roomStatus:q});case 10:s=e.sent,console.log("Payment successful. Payment ID:",s.id),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(7),console.log("Error saving payment:",e.t0),v("Error saving payment");case 18:case"end":return e.stop()}}),e,null,[[7,14]])})));return function(){return e.apply(this,arguments)}}(),le=n.map((function(e){return e.images[0]}));return(0,i.useEffect)((function(){var e=setTimeout((function(){ce.current&&ce.current.swiper&&ce.current.swiper.slideNext()}),5e3);return function(){return clearTimeout(e)}}),[H]),(0,h.jsxs)("div",{className:"container",children:[(0,h.jsxs)("div",{className:"mainCarousel",children:[(0,h.jsx)(d.tq,{ref:ce,slidesPerView:1,navigation:!0,pagination:!0,autoplay:{delay:5e3},onSlideChange:function(e){return K(e.activeIndex)},children:le.map((function(e,t){return(0,h.jsx)(d.o5,{children:(0,h.jsx)("img",{className:"carousel-image ".concat(t===H?"active":""),src:e,alt:"Room ".concat(n[t].name)})},t)}))}),(0,h.jsx)(u.u1R,{className:"arrow left",onClick:function(){K((function(e){return 0===e?le.length-1:e-1}))}}),(0,h.jsx)(u.hjJ,{className:"arrow right",onClick:function(){K((function(e){return e===le.length-1?0:e+1}))}})]}),(0,h.jsx)("h2",{children:"Rooms"}),(0,h.jsx)("div",{className:"room-container",children:n.map((function(e,t){return(0,h.jsxs)("div",{className:"room-card",onClick:function(){return function(e){k(e)}(e)},children:[(0,h.jsx)("img",{className:"room-image",src:le[t],alt:"Room ".concat(e.name)}),(0,h.jsxs)("div",{className:"room-details",children:[(0,h.jsx)("h3",{className:"room-name",children:e.name}),(0,h.jsx)("p",{className:"room-type",children:e.type})]})]},e.id)}))}),N&&(0,h.jsx)("div",{className:"modal",children:(0,h.jsxs)("div",{className:"modal-content",children:[(0,h.jsx)("span",{className:"close",onClick:se,children:"\xd7"}),(0,h.jsxs)("div",{className:"carousel",children:[(0,h.jsx)(u.u1R,{className:"arrow left",onClick:function(){K((function(e){return 0===e?N.images.length-1:e-1}))}}),(0,h.jsx)("img",{className:"room-image",src:N.images[H],alt:"Room ".concat(N.name)}),(0,h.jsx)(u.hjJ,{className:"arrow right",onClick:function(){K((function(e){return e===N.images.length-1?0:e+1}))}})]}),(0,h.jsx)("h2",{children:N.name}),(0,h.jsxs)("p",{children:["Type: ",N.type]}),(0,h.jsxs)("p",{children:["Description: ",N.description]}),(0,h.jsxs)("p",{children:["Price: R",N.price]}),(0,h.jsxs)("p",{children:["Capacity: ",N.adults," Adults, ",N.children," ","Children"]}),(0,h.jsx)("button",{onClick:function(){Z(!0)},children:"Book"})]})}),C&&(0,h.jsx)("div",{className:"booking-modal",children:(0,h.jsxs)("div",{className:"booking-modal-content",children:[(0,h.jsx)("span",{className:"close",onClick:se,children:"\xd7"}),f&&(0,h.jsx)("p",{children:f}),(0,h.jsx)("h2",{children:"Booking Details"}),(0,h.jsx)("label",{htmlFor:"checkInDate",children:"Check-in Date:"}),(0,h.jsx)("input",{type:"date",id:"checkInDate",value:E,onChange:function(e){return S(e.target.value)}}),(0,h.jsx)("label",{htmlFor:"checkOutDate",children:"Check-out Date:"}),(0,h.jsx)("input",{type:"date",id:"checkOutDate",value:T,onChange:function(e){return R(e.target.value)}}),(0,h.jsx)("button",{onClick:function(){console.log("Room:",N),console.log("Check-in Date:",E),console.log("Check-out Date:",T);var e=new Date(E),t=new Date(T);if(isNaN(e.getTime())||isNaN(t.getTime()))v("Please enter valid check-in and check-out dates.");else{var n=t.getTime()-e.getTime(),a=Math.ceil(n/864e5);if(a<=0)v("Check-out date should be after check-in date.");else{var r=N.price*a;Q(r),re(!0),v(null)}}},children:"Confirm price"}),(0,h.jsx)("button",{onClick:function(){return ee(!0)},disabled:!ae,children:"Continue with payment"}),(0,h.jsxs)("p",{children:["Total Price: R",M]})]})}),$&&(0,h.jsx)("div",{className:"payment-modal",children:(0,h.jsxs)("div",{className:"payment-modal-content card-form",children:[(0,h.jsx)("span",{className:"close",onClick:function(){ee(!1),re(!1),v(null)},children:"\xd7"}),(0,h.jsx)("h2",{children:"Payment Details"}),f&&(0,h.jsx)("p",{children:f}),(0,h.jsxs)("form",{children:[(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{htmlFor:"cardNumber",children:"Card Number:"}),(0,h.jsx)("input",{type:"text",id:"cardNumber",pattern:"[0-9]{13,19}",maxLength:"19",required:!0})]}),(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{htmlFor:"cardName",children:"Cardholder Name:"}),(0,h.jsx)("input",{type:"text",id:"cardName",pattern:"[A-Za-z\\s]+",maxLength:"50",required:!0})]}),(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{htmlFor:"expiryDate",children:"Expiry Date:"}),(0,h.jsx)("input",{type:"text",id:"expiryDate",pattern:"(0[1-9]|1[0-2])\\/[0-9]{2}",maxLength:"5",required:!0})]}),(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsx)("label",{htmlFor:"cvv",children:"CVV:"}),(0,h.jsx)("input",{type:"text",id:"cvv",pattern:"[0-9]{3,4}",maxLength:"4",required:!0})]}),(0,h.jsx)("button",{onClick:ie,children:"Pay"})]})]})})]})}}}]);
//# sourceMappingURL=907.2e265248.chunk.js.map