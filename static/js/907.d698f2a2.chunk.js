"use strict";(self.webpackChunkhotel_app_client=self.webpackChunkhotel_app_client||[]).push([[907],{6242:function(e,t,n){n.r(t),n.d(t,{default:function(){return x}});var a=n(4165),r=n(1413),c=n(5861),s=n(9439),i=n(2791),l=n(515),o=n(2481),u=n(4373),d=(n(4676),n(4432),n(5880),n(9329)),m=n(6605),h=n(8525),p=n(184);m.ZP.use([m.W_,m.tl,m.pt]);var x=function(){var e=(0,i.useState)([]),t=(0,s.Z)(e,2),n=t[0],m=t[1],x=(0,i.useState)(null),f=(0,s.Z)(x,2),v=f[0],j=f[1],g=(0,i.useState)(null),N=(0,s.Z)(g,2),k=N[0],y=N[1],b=(0,i.useState)(!1),C=(0,s.Z)(b,2),Z=C[0],D=C[1],w=(0,i.useState)(""),E=(0,s.Z)(w,2),S=E[0],I=E[1],P=(0,i.useState)(""),T=(0,s.Z)(P,2),R=T[0],J=T[1],q=(0,i.useState)("NotApproved"),B=(0,s.Z)(q,1)[0],F=(0,i.useState)(null),L=(0,s.Z)(F,2),_=L[0],U=L[1],A=(0,i.useState)(""),O=(0,s.Z)(A,2),V=(O[0],O[1]),z=(0,i.useState)(0),M=(0,s.Z)(z,2),Q=M[0],W=M[1],G=(0,i.useState)(0),H=(0,s.Z)(G,2),K=H[0],X=H[1],Y=(0,i.useState)(!1),$=(0,s.Z)(Y,2),ee=$[0],te=$[1],ne=(0,i.useState)(!1),ae=(0,s.Z)(ne,2),re=ae[0],ce=ae[1],se=(0,i.useRef)(null);(0,i.useEffect)((function(){var e=function(){var e=(0,c.Z)((0,a.Z)().mark((function e(){var t,n,c,s,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=(0,o.hJ)(l.db,"rooms"),e.next=4,(0,o.PL)(t);case 4:return n=e.sent,c=n.docs.map((function(e){return(0,r.Z)({id:e.id},e.data())})),m(c),s=(0,o.hJ)(l.db,"headerCarouselImages"),i=(0,o.qs)(l.db),c.forEach((function(e){var t=e.images[0],n=(0,o.JU)(s);i.set(n,{image:t})})),e.next=12,i.commit();case 12:e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),console.log("Error fetching rooms:",e.t0),j("Error fetching rooms");case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}();e()}),[]),(0,i.useEffect)((function(){var e=function(){var e=(0,c.Z)((0,a.Z)().mark((function e(){var t,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!l.I.currentUser){e.next=7;break}return t=(0,o.JU)(l.db,"users",l.I.currentUser.uid),e.next=5,(0,o.QT)(t);case 5:(n=e.sent).exists()&&(U(n.data()),V(n.data().email));case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("Error fetching user profile:",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();e()}),[]);var ie=function(){y(null),D(!1),I(""),J(""),W(0),ce(!1),j(null)},le=function(){var e=(0,c.Z)((0,a.Z)().mark((function e(){var t,n,r,c,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=document.getElementById("cardNumber").value,n=document.getElementById("cardName").value,r=document.getElementById("expiryDate").value,c=document.getElementById("cvv").value,t&&n&&r&&c){e.next=7;break}return j("Please fill in all the payment details."),e.abrupt("return");case 7:return e.prev=7,e.next=10,(0,o.ET)((0,o.hJ)(l.db,"payments"),{email:_.email,room:k,checkInDate:S,checkOutDate:R,totalPrice:Q,cardNumber:t,cardName:n,expiryDate:r,cvv:c,timestamp:(new Date).getTime(),roomStatus:B,test:["1","2","3"]});case 10:s=e.sent,console.log("Payment successful. Payment ID:",s.id),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(7),console.log("Error saving payment:",e.t0),j("Error saving payment");case 18:case"end":return e.stop()}}),e,null,[[7,14]])})));return function(){return e.apply(this,arguments)}}(),oe=n.map((function(e){return e.images[0]}));return(0,i.useEffect)((function(){var e=setTimeout((function(){se.current&&se.current.swiper&&se.current.swiper.slideNext()}),5e3);return function(){return clearTimeout(e)}}),[K]),(0,p.jsxs)("div",{className:"container",children:[(0,p.jsxs)("div",{className:"mainCarousel",children:[(0,p.jsx)(d.tq,{ref:se,slidesPerView:1,navigation:!0,pagination:!0,autoplay:{delay:5e3},onSlideChange:function(e){return X(e.activeIndex)},children:oe.map((function(e,t){return(0,p.jsx)(d.o5,{children:(0,p.jsx)("img",{className:"carousel-image ".concat(t===K?"active":""),src:e,alt:"Room ".concat(n[t].name)})},t)}))}),(0,p.jsx)(u.u1R,{className:"arrow left",onClick:function(){X((function(e){return 0===e?oe.length-1:e-1}))}}),(0,p.jsx)(u.hjJ,{className:"arrow right",onClick:function(){X((function(e){return e===oe.length-1?0:e+1}))}})]}),(0,p.jsx)("h2",{children:"Rooms"}),(0,p.jsx)("div",{className:"room-container",children:n.map((function(e,t){return(0,p.jsxs)("div",{className:"room-card",onClick:function(){return function(e){y(e)}(e)},children:[(0,p.jsx)("img",{className:"room-image",src:oe[t],alt:"Room ".concat(e.name)}),(0,p.jsxs)("div",{className:"room-details",children:[(0,p.jsx)("h3",{className:"room-name",children:e.name}),(0,p.jsx)("p",{className:"room-type",children:e.type})]})]},e.id)}))}),k&&(0,p.jsx)("div",{className:"modal",children:(0,p.jsxs)("div",{className:"modal-content",children:[(0,p.jsx)("span",{className:"close",onClick:ie,children:"\xd7"}),(0,p.jsxs)("div",{className:"carousel",children:[(0,p.jsx)(u.u1R,{className:"arrow left",onClick:function(){X((function(e){return 0===e?k.images.length-1:e-1}))}}),(0,p.jsx)("img",{className:"room-image",src:k.images[K],alt:"Room ".concat(k.name)}),(0,p.jsx)(u.hjJ,{className:"arrow right",onClick:function(){X((function(e){return e===k.images.length-1?0:e+1}))}})]}),(0,p.jsx)("h2",{children:k.name}),(0,p.jsxs)("p",{children:["Type: ",k.type]}),(0,p.jsxs)("p",{children:["Description: ",k.description]}),(0,p.jsxs)("p",{children:["Price: R",k.price]}),(0,p.jsxs)("p",{children:["Capacity: ",k.adults," Adults, ",k.children," ","Children"]}),(0,p.jsx)("button",{onClick:function(){D(!0)},children:"Book"})]})}),Z&&(0,p.jsx)("div",{className:"booking-modal",children:(0,p.jsxs)("div",{className:"booking-modal-content",children:[(0,p.jsx)("span",{className:"close",onClick:ie,children:"\xd7"}),v&&(0,p.jsx)("p",{children:v}),(0,p.jsx)("h2",{children:"Booking Details"}),(0,p.jsx)("label",{htmlFor:"checkInDate",children:"Check-in Date:"}),(0,p.jsx)("input",{type:"date",id:"checkInDate",value:S,onChange:function(e){return I(e.target.value)}}),(0,p.jsx)("label",{htmlFor:"checkOutDate",children:"Check-out Date:"}),(0,p.jsx)("input",{type:"date",id:"checkOutDate",value:R,onChange:function(e){return J(e.target.value)}}),(0,p.jsx)("button",{onClick:function(){console.log("Room:",k),console.log("Check-in Date:",S),console.log("Check-out Date:",R);var e=new Date(S),t=new Date(R);if(isNaN(e.getTime())||isNaN(t.getTime()))j("Please enter valid check-in and check-out dates.");else{var n=t.getTime()-e.getTime(),a=Math.ceil(n/864e5);if(a<=0)j("Check-out date should be after check-in date.");else{var r=k.price*a;W(r),ce(!0),j(null)}}},children:"Confirm price"}),(0,p.jsx)("button",{onClick:function(){return te(!0)},disabled:!re,children:"Continue with payment"}),(0,p.jsxs)("p",{children:["Total Price: R",Q]})]})}),ee&&(0,p.jsx)("div",{className:"payment-modal",children:(0,p.jsxs)("div",{className:"payment-modal-content card-form",children:[(0,p.jsx)("span",{className:"close",onClick:function(){te(!1),ce(!1),j(null)},children:"\xd7"}),(0,p.jsx)("h2",{children:"Payment Details"}),v&&(0,p.jsx)("p",{children:v}),(0,p.jsxs)("form",{children:[(0,p.jsxs)("div",{className:"form-group",children:[(0,p.jsx)("label",{htmlFor:"cardNumber",children:"Card Number:"}),(0,p.jsx)("input",{type:"text",id:"cardNumber",pattern:"[0-9]{13,19}",maxLength:"19",required:!0})]}),(0,p.jsxs)("div",{className:"form-group",children:[(0,p.jsx)("label",{htmlFor:"cardName",children:"Cardholder Name:"}),(0,p.jsx)("input",{type:"text",id:"cardName",pattern:"[A-Za-z\\s]+",maxLength:"50",required:!0})]}),(0,p.jsxs)("div",{className:"form-group",children:[(0,p.jsx)("label",{htmlFor:"expiryDate",children:"Expiry Date:"}),(0,p.jsx)("input",{type:"text",id:"expiryDate",pattern:"(0[1-9]|1[0-2])\\/[0-9]{2}",maxLength:"5",required:!0})]}),(0,p.jsxs)("div",{className:"form-group",children:[(0,p.jsx)("label",{htmlFor:"cvv",children:"CVV:"}),(0,p.jsx)("input",{type:"text",id:"cvv",pattern:"[0-9]{3,4}",maxLength:"4",required:!0})]}),(0,p.jsx)("button",{onClick:le,children:"Pay"})]})]})}),(0,p.jsx)(h.Z,{})]})}}}]);
//# sourceMappingURL=907.d698f2a2.chunk.js.map