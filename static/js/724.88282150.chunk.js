/*! For license information please see 724.88282150.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkhotel_app_client=self.webpackChunkhotel_app_client||[]).push([[724],{724:function(e,t,n){n.r(t),n.d(t,{default:function(){return w}});var r=n(4165),i=n(1413),a=n(5861),s=n(9439),o=n(2791),c=n(515),u=n(4940);function l(e,t){void 0===t&&(t={});var n=function(e){if(e&&"j"===e[0]&&":"===e[1])return e.substr(2);return e}(e);if(function(e,t){return"undefined"===typeof t&&(t=!e||"{"!==e[0]&&"["!==e[0]&&'"'!==e[0]),!t}(n,t.doNotParse))try{return JSON.parse(n)}catch(r){}return e}var d=function(){return d=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},d.apply(this,arguments)},h=function(){function e(e,t){var n=this;this.changeListeners=[],this.HAS_DOCUMENT_COOKIE=!1,this.cookies=function(e,t){return"string"===typeof e?u.Q(e,t):"object"===typeof e&&null!==e?e:{}}(e,t),new Promise((function(){n.HAS_DOCUMENT_COOKIE="object"===typeof document&&"string"===typeof document.cookie})).catch((function(){}))}return e.prototype._updateBrowserValues=function(e){this.HAS_DOCUMENT_COOKIE&&(this.cookies=u.Q(document.cookie,e))},e.prototype._emitChange=function(e){for(var t=0;t<this.changeListeners.length;++t)this.changeListeners[t](e)},e.prototype.get=function(e,t,n){return void 0===t&&(t={}),this._updateBrowserValues(n),l(this.cookies[e],t)},e.prototype.getAll=function(e,t){void 0===e&&(e={}),this._updateBrowserValues(t);var n={};for(var r in this.cookies)n[r]=l(this.cookies[r],e);return n},e.prototype.set=function(e,t,n){var r;"object"===typeof t&&(t=JSON.stringify(t)),this.cookies=d(d({},this.cookies),((r={})[e]=t,r)),this.HAS_DOCUMENT_COOKIE&&(document.cookie=u.q(e,t,n)),this._emitChange({name:e,value:t,options:n})},e.prototype.remove=function(e,t){var n=t=d(d({},t),{expires:new Date(1970,1,1,0,0,1),maxAge:0});this.cookies=d({},this.cookies),delete this.cookies[e],this.HAS_DOCUMENT_COOKIE&&(document.cookie=u.q(e,"",n)),this._emitChange({name:e,value:void 0,options:t})},e.prototype.addChangeListener=function(e){this.changeListeners.push(e)},e.prototype.removeChangeListener=function(e){var t=this.changeListeners.indexOf(e);t>=0&&this.changeListeners.splice(t,1)},e}(),m=o.createContext(new h),p=(m.Provider,m.Consumer,m);function f(e){var t=(0,o.useContext)(p);if(!t)throw new Error("Missing <CookiesProvider>");var n=t.getAll(),r=(0,o.useState)(n),i=r[0],a=r[1],s=(0,o.useRef)(i);return"undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement&&(0,o.useLayoutEffect)((function(){function n(){var n=t.getAll();(function(e,t,n){if(!e)return!0;for(var r=0,i=e;r<i.length;r++){var a=i[r];if(t[a]!==n[a])return!0}return!1})(e||null,n,s.current)&&a(n),s.current=n}return t.addChangeListener(n),function(){t.removeChangeListener(n)}}),[t]),[i,(0,o.useMemo)((function(){return t.set.bind(t)}),[t]),(0,o.useMemo)((function(){return t.remove.bind(t)}),[t])]}var v=n(2481),x=(n(7416),n(4373)),g=(n(4676),n(4432),n(5880),n(9329)),y=n(6605),j=n(1877),k=n(8525),N=n(674),C=n(184);y.ZP.use([y.W_,y.tl,y.pt]);var w=function(){var e=(0,o.useState)([]),t=(0,s.Z)(e,2),n=t[0],u=t[1],l=(0,o.useState)(!0),d=(0,s.Z)(l,2),h=d[0],m=d[1],p=(0,o.useState)(null),y=(0,s.Z)(p,2),w=y[0],b=y[1],S=(0,o.useState)(null),E=(0,s.Z)(S,2),Z=E[0],T=E[1],D=(0,o.useState)(!1),O=(0,s.Z)(D,2),_=O[0],P=O[1],I=(0,o.useState)(""),L=(0,s.Z)(I,2),A=L[0],U=L[1],R=(0,o.useState)(""),M=(0,s.Z)(R,2),B=M[0],q=M[1],J=(0,o.useState)("NotApproved"),F=(0,s.Z)(J,1)[0],H=(0,o.useState)(null),V=(0,s.Z)(H,2),K=V[0],Q=V[1],W=(0,o.useState)(""),z=(0,s.Z)(W,2),$=(z[0],z[1]),G=(0,o.useState)(0),X=(0,s.Z)(G,2),Y=X[0],ee=X[1],te=(0,o.useState)(0),ne=(0,s.Z)(te,2),re=ne[0],ie=ne[1],ae=(0,o.useState)(!1),se=(0,s.Z)(ae,2),oe=se[0],ce=se[1],ue=(0,o.useState)(!1),le=(0,s.Z)(ue,2),de=le[0],he=le[1],me=(0,o.useState)(0),pe=(0,s.Z)(me,2),fe=pe[0],ve=pe[1],xe=(0,o.useRef)(null),ge=(0,o.useState)(null),ye=(0,s.Z)(ge,2),je=ye[0],ke=ye[1],Ne=f(["bookingCookie"]),Ce=(0,s.Z)(Ne,2),we=Ce[0],be=Ce[1];console.log(we),(0,o.useEffect)((function(){var e=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var t,n,a,s,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=(0,v.hJ)(c.db,"rooms"),e.next=4,(0,v.PL)(t);case 4:return n=e.sent,a=n.docs.map((function(e){return(0,i.Z)({id:e.id},e.data())})),u(a),m(!1),s=(0,v.hJ)(c.db,"headerCarouselImages"),o=(0,v.qs)(c.db),a.forEach((function(e){var t=e.images[0],n=(0,v.JU)(s);o.set(n,{image:t})})),e.next=13,o.commit();case 13:e.next=20;break;case 15:e.prev=15,e.t0=e.catch(0),console.log("Error fetching rooms:",e.t0),b("Error fetching rooms"),m(!1);case 20:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}();e()}),[]),(0,o.useEffect)((function(){var e=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var t,n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!c.I.currentUser){e.next=7;break}return t=(0,v.JU)(c.db,"users",c.I.currentUser.uid),e.next=5,(0,v.QT)(t);case 5:(n=e.sent).exists()&&(Q(n.data()),$(n.data().email));case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("Error fetching user profile:",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();e()}),[]);var Se=function(){T(null),P(!1),U(""),q(""),ee(0),ve(0),he(!1),b(null)},Ee=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var t,n,i,a,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=document.getElementById("cardNumber").value,n=document.getElementById("cardName").value,i=document.getElementById("expiryDate").value,a=document.getElementById("cvv").value,t&&n&&i&&a){e.next=7;break}return b("Please fill in all the payment details."),e.abrupt("return");case 7:return e.prev=7,m(!0),e.next=11,(0,v.ET)((0,v.hJ)(c.db,"payments"),{email:K.email,room:Z,checkInDate:A,checkOutDate:B,totalPrice:Y,cardNumber:t,cardName:n,expiryDate:i,cvv:a,timestamp:(new Date).getTime(),roomStatus:F});case 11:s=e.sent,be("bookingCookie",s.id,{path:"/"}),ke(!0),m(!1),console.log("Payment successful. Payment ID:",s.id),T(!1),P(!1),he(!1),e.next=29;break;case 21:e.prev=21,e.t0=e.catch(7),console.log("Error saving payment:",e.t0),b("Error saving payment"),T(!1),m(!1),P(!1),he(!1);case 29:case"end":return e.stop()}}),e,null,[[7,21]])})));return function(){return e.apply(this,arguments)}}(),Ze=n.map((function(e){return e.images[0]}));return(0,o.useEffect)((function(){var e=setTimeout((function(){xe.current&&xe.current.swiper&&xe.current.swiper.slideNext()}),5e3);return function(){return clearTimeout(e)}}),[re]),(0,C.jsxs)("div",{className:"home-container",children:[(0,C.jsx)("h1",{children:"Welcome"}),(0,C.jsxs)("div",{className:"container",children:[(0,C.jsxs)("div",{className:"mainCarousel",children:[(0,C.jsx)(g.tq,{ref:xe,slidesPerView:1,navigation:!0,pagination:!0,autoplay:{delay:5e3},onSlideChange:function(e){return ie(e.activeIndex)},children:Ze.map((function(e,t){return(0,C.jsx)(g.o5,{children:(0,C.jsx)("img",{className:"carousel-image ".concat(t===re?"active":""),src:e,alt:"Room ".concat(n[t].name)})},t)}))}),(0,C.jsx)(x.u1R,{className:"arrow left",onClick:function(){ie((function(e){return 0===e?Ze.length-1:e-1}))}}),(0,C.jsx)(x.hjJ,{className:"arrow right",onClick:function(){ie((function(e){return e===Ze.length-1?0:e+1}))}})]}),(0,C.jsx)("h2",{children:"Rooms"}),(0,C.jsx)("div",{className:"room-container",children:h?(0,C.jsx)(N.Z,{}):n.map((function(e,t){return(0,C.jsxs)("div",{className:"room-card",onClick:function(){return function(e){T(e)}(e)},children:[(0,C.jsx)("img",{className:"room-image",src:Ze[t],alt:"Room ".concat(e.name)}),(0,C.jsxs)("div",{className:"room-details",children:[(0,C.jsx)("h3",{className:"room-name",children:e.name}),(0,C.jsx)("p",{className:"room-type",children:e.type})]})]},e.id)}))}),Z&&(0,C.jsx)("div",{className:"modal",children:(0,C.jsxs)("div",{className:"modal-content",children:[(0,C.jsx)("span",{className:"close",onClick:Se,children:(0,C.jsx)(j.dc5,{})}),(0,C.jsxs)("div",{className:"carousel",children:[(0,C.jsx)(x.u1R,{className:"arrow left",onClick:function(){ie((function(e){return 0===e?Z.images.length-1:e-1}))}}),(0,C.jsx)("img",{className:"room-image",src:Z.images[re],alt:"Room ".concat(Z.name)}),(0,C.jsx)(x.hjJ,{className:"arrow right",onClick:function(){ie((function(e){return e===Z.images.length-1?0:e+1}))}})]}),(0,C.jsx)("h2",{children:Z.name}),(0,C.jsxs)("p",{children:["Type: ",Z.type]}),(0,C.jsxs)("p",{children:["Description: ",Z.description]}),(0,C.jsxs)("p",{children:["Price: R",Z.price]}),(0,C.jsxs)("p",{children:["Capacity: ",Z.adults," Adults, ",Z.children," ","Children (Between the ages of 2 and 11 inclusive)"]}),(0,C.jsx)("button",{onClick:function(){P(!0)},children:"Book"})]})}),_&&(0,C.jsx)("div",{className:"booking-modal",children:(0,C.jsxs)("div",{className:"booking-modal-content",children:[(0,C.jsx)("span",{className:"close",onClick:Se,children:(0,C.jsx)(j.dc5,{})}),w&&(0,C.jsx)("p",{children:w}),(0,C.jsx)("h2",{children:"Booking Details"}),(0,C.jsx)("label",{htmlFor:"checkInDate",children:"Check-in Date:"}),(0,C.jsx)("input",{type:"date",id:"checkInDate",value:A,onChange:function(e){return U(e.target.value)}}),(0,C.jsx)("label",{htmlFor:"checkOutDate",children:"Check-out Date:"}),(0,C.jsx)("input",{type:"date",id:"checkOutDate",value:B,onChange:function(e){return q(e.target.value)}}),(0,C.jsx)("button",{onClick:function(){var e=new Date(A),t=new Date(B);if(isNaN(e.getTime())||isNaN(t.getTime()))b("Please enter valid check-in and check-out dates.");else{var n=t.getTime()-e.getTime(),r=Math.ceil(n/864e5);if(r<=0)b("Check-out date should be after check-in date.");else{var i=Z.price*r;ee(i),ve(r),he(!0),b(null)}}},children:"Confirm price"}),(0,C.jsx)("button",{onClick:function(){return ce(!0)},disabled:!de,children:"Continue with payment"}),(0,C.jsxs)("p",{children:["Number of Nights: ",fe]})," ",(0,C.jsxs)("p",{children:["Total Price: R",Y]})]})}),oe&&(0,C.jsx)("div",{className:"payment-modal",children:(0,C.jsxs)("div",{className:"payment-modal-content card-form",children:[(0,C.jsx)("span",{className:"close",onClick:function(){ce(!1),he(!1),b(null),T(null),U(""),q(""),ee(0),ve(0),b(null),ke(null)},children:(0,C.jsx)(j.dc5,{})}),(0,C.jsx)("h2",{children:"Payment Details"}),w&&(0,C.jsx)("p",{children:w}),!0===je&&(0,C.jsxs)("div",{className:"payment-success",children:[(0,C.jsx)("h2",{children:"Payment Successful"}),(0,C.jsx)("p",{children:"Thank you for your payment!"})]}),!1===je&&(0,C.jsxs)("div",{className:"payment-failure",children:[(0,C.jsx)("h2",{children:"Payment Failed"}),(0,C.jsx)("p",{children:"Sorry, the payment was unsuccessful."})]}),null===je&&(0,C.jsxs)("div",{children:[(0,C.jsxs)("div",{className:"form-group",children:[(0,C.jsx)("label",{htmlFor:"cardNumber",children:"Card Number:"}),(0,C.jsx)("input",{type:"text",id:"cardNumber",pattern:"[0-9]{13,19}",maxLength:"19",required:!0})]}),(0,C.jsxs)("div",{className:"form-group",children:[(0,C.jsx)("label",{htmlFor:"cardName",children:"Cardholder Name:"}),(0,C.jsx)("input",{type:"text",id:"cardName",pattern:"[A-Za-z\\s]+",maxLength:"50",required:!0})]}),(0,C.jsxs)("div",{className:"form-group",children:[(0,C.jsx)("label",{htmlFor:"expiryDate",children:"Expiry Date:"}),(0,C.jsx)("input",{type:"text",id:"expiryDate",pattern:"(0[1-9]|1[0-2])\\/[0-9]{2}",maxLength:"5",required:!0})]}),(0,C.jsxs)("div",{className:"form-group",children:[(0,C.jsx)("label",{htmlFor:"cvv",children:"CVV:"}),(0,C.jsx)("input",{type:"text",id:"cvv",pattern:"[0-9]{3,4}",maxLength:"4",required:!0})]}),(0,C.jsx)("button",{onClick:Ee,children:"Pay"})]})]})}),(0,C.jsx)(k.Z,{})]})]})}},4940:function(e,t){t.Q=function(e,t){if("string"!==typeof e)throw new TypeError("argument str must be a string");for(var r={},i=t||{},s=e.split(";"),o=i.decode||n,c=0;c<s.length;c++){var u=s[c],l=u.indexOf("=");if(!(l<0)){var d=u.substring(0,l).trim();if(void 0==r[d]){var h=u.substring(l+1,u.length).trim();'"'===h[0]&&(h=h.slice(1,-1)),r[d]=a(h,o)}}}return r},t.q=function(e,t,n){var a=n||{},s=a.encode||r;if("function"!==typeof s)throw new TypeError("option encode is invalid");if(!i.test(e))throw new TypeError("argument name is invalid");var o=s(t);if(o&&!i.test(o))throw new TypeError("argument val is invalid");var c=e+"="+o;if(null!=a.maxAge){var u=a.maxAge-0;if(isNaN(u)||!isFinite(u))throw new TypeError("option maxAge is invalid");c+="; Max-Age="+Math.floor(u)}if(a.domain){if(!i.test(a.domain))throw new TypeError("option domain is invalid");c+="; Domain="+a.domain}if(a.path){if(!i.test(a.path))throw new TypeError("option path is invalid");c+="; Path="+a.path}if(a.expires){if("function"!==typeof a.expires.toUTCString)throw new TypeError("option expires is invalid");c+="; Expires="+a.expires.toUTCString()}a.httpOnly&&(c+="; HttpOnly");a.secure&&(c+="; Secure");if(a.sameSite){switch("string"===typeof a.sameSite?a.sameSite.toLowerCase():a.sameSite){case!0:c+="; SameSite=Strict";break;case"lax":c+="; SameSite=Lax";break;case"strict":c+="; SameSite=Strict";break;case"none":c+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return c};var n=decodeURIComponent,r=encodeURIComponent,i=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function a(e,t){try{return t(e)}catch(n){return e}}}}]);
//# sourceMappingURL=724.88282150.chunk.js.map