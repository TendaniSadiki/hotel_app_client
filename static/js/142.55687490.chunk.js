"use strict";(self.webpackChunkhotel_app_client=self.webpackChunkhotel_app_client||[]).push([[142],{6573:function(e,t,n){n.r(t);var a=n(4165),r=n(1413),s=n(5861),c=n(9439),i=n(2791),l=n(515),o=n(2481),u=(n(7416),n(4373)),d=(n(4676),n(4432),n(5880),n(9329)),m=n(6605),h=n(8525),p=n(674),x=n(184);m.ZP.use([m.W_,m.tl,m.pt]);t.default=function(){var e=(0,i.useState)([]),t=(0,c.Z)(e,2),n=t[0],m=t[1],f=(0,i.useState)(!0),v=(0,c.Z)(f,2),j=v[0],g=v[1],N=(0,i.useState)(null),k=(0,c.Z)(N,2),y=k[0],b=k[1],C=(0,i.useState)(null),Z=(0,c.Z)(C,2),D=Z[0],w=Z[1],S=(0,i.useState)(!1),E=(0,c.Z)(S,2),I=E[0],P=E[1],T=(0,i.useState)(""),R=(0,c.Z)(T,2),J=R[0],q=R[1],B=(0,i.useState)(""),F=(0,c.Z)(B,2),L=F[0],_=F[1],U=(0,i.useState)("NotApproved"),A=(0,c.Z)(U,1)[0],O=(0,i.useState)(null),V=(0,c.Z)(O,2),z=V[0],M=V[1],Q=(0,i.useState)(""),W=(0,c.Z)(Q,2),G=(W[0],W[1]),H=(0,i.useState)(0),K=(0,c.Z)(H,2),X=K[0],Y=K[1],$=(0,i.useState)(0),ee=(0,c.Z)($,2),te=ee[0],ne=ee[1],ae=(0,i.useState)(!1),re=(0,c.Z)(ae,2),se=re[0],ce=re[1],ie=(0,i.useState)(!1),le=(0,c.Z)(ie,2),oe=le[0],ue=le[1],de=(0,i.useRef)(null);(0,i.useEffect)((function(){var e=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var t,n,s,c,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=(0,o.hJ)(l.db,"rooms"),e.next=4,(0,o.PL)(t);case 4:return n=e.sent,s=n.docs.map((function(e){return(0,r.Z)({id:e.id},e.data())})),m(s),g(!1),c=(0,o.hJ)(l.db,"headerCarouselImages"),i=(0,o.qs)(l.db),s.forEach((function(e){var t=e.images[0],n=(0,o.JU)(c);i.set(n,{image:t})})),e.next=13,i.commit();case 13:e.next=20;break;case 15:e.prev=15,e.t0=e.catch(0),console.log("Error fetching rooms:",e.t0),b("Error fetching rooms"),g(!1);case 20:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}();e()}),[]),(0,i.useEffect)((function(){var e=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var t,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!l.I.currentUser){e.next=7;break}return t=(0,o.JU)(l.db,"users",l.I.currentUser.uid),e.next=5,(0,o.QT)(t);case 5:(n=e.sent).exists()&&(M(n.data()),G(n.data().email));case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("Error fetching user profile:",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();e()}),[]);var me=function(){w(null),P(!1),q(""),_(""),Y(0),ue(!1),b(null)},he=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var t,n,r,s,c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=document.getElementById("cardNumber").value,n=document.getElementById("cardName").value,r=document.getElementById("expiryDate").value,s=document.getElementById("cvv").value,t&&n&&r&&s){e.next=7;break}return b("Please fill in all the payment details."),e.abrupt("return");case 7:return e.prev=7,e.next=10,(0,o.ET)((0,o.hJ)(l.db,"payments"),{email:z.email,room:D,checkInDate:J,checkOutDate:L,totalPrice:X,cardNumber:t,cardName:n,expiryDate:r,cvv:s,timestamp:(new Date).getTime(),roomStatus:A,test:["1","2","3"]});case 10:c=e.sent,console.log("Payment successful. Payment ID:",c.id),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(7),console.log("Error saving payment:",e.t0),b("Error saving payment");case 18:case"end":return e.stop()}}),e,null,[[7,14]])})));return function(){return e.apply(this,arguments)}}(),pe=n.map((function(e){return e.images[0]}));return(0,i.useEffect)((function(){var e=setTimeout((function(){de.current&&de.current.swiper&&de.current.swiper.slideNext()}),5e3);return function(){return clearTimeout(e)}}),[te]),(0,x.jsxs)("div",{className:"container",children:[(0,x.jsxs)("div",{className:"mainCarousel",children:[(0,x.jsx)(d.tq,{ref:de,slidesPerView:1,navigation:!0,pagination:!0,autoplay:{delay:5e3},onSlideChange:function(e){return ne(e.activeIndex)},children:pe.map((function(e,t){return(0,x.jsx)(d.o5,{children:(0,x.jsx)("img",{className:"carousel-image ".concat(t===te?"active":""),src:e,alt:"Room ".concat(n[t].name)})},t)}))}),(0,x.jsx)(u.u1R,{className:"arrow left",onClick:function(){ne((function(e){return 0===e?pe.length-1:e-1}))}}),(0,x.jsx)(u.hjJ,{className:"arrow right",onClick:function(){ne((function(e){return e===pe.length-1?0:e+1}))}})]}),(0,x.jsx)("h2",{children:"Rooms"}),(0,x.jsx)("div",{className:"room-container",children:j?(0,x.jsx)(p.Z,{}):n.map((function(e,t){return(0,x.jsxs)("div",{className:"room-card",onClick:function(){return function(e){w(e)}(e)},children:[(0,x.jsx)("img",{className:"room-image",src:pe[t],alt:"Room ".concat(e.name)}),(0,x.jsxs)("div",{className:"room-details",children:[(0,x.jsx)("h3",{className:"room-name",children:e.name}),(0,x.jsx)("p",{className:"room-type",children:e.type})]})]},e.id)}))}),D&&(0,x.jsx)("div",{className:"modal",children:(0,x.jsxs)("div",{className:"modal-content",children:[(0,x.jsx)("span",{className:"close",onClick:me,children:"\xd7"}),(0,x.jsxs)("div",{className:"carousel",children:[(0,x.jsx)(u.u1R,{className:"arrow left",onClick:function(){ne((function(e){return 0===e?D.images.length-1:e-1}))}}),(0,x.jsx)("img",{className:"room-image",src:D.images[te],alt:"Room ".concat(D.name)}),(0,x.jsx)(u.hjJ,{className:"arrow right",onClick:function(){ne((function(e){return e===D.images.length-1?0:e+1}))}})]}),(0,x.jsx)("h2",{children:D.name}),(0,x.jsxs)("p",{children:["Type: ",D.type]}),(0,x.jsxs)("p",{children:["Description: ",D.description]}),(0,x.jsxs)("p",{children:["Price: R",D.price]}),(0,x.jsxs)("p",{children:["Capacity: ",D.adults," Adults, ",D.children," ","Children"]}),(0,x.jsx)("button",{onClick:function(){P(!0)},children:"Book"})]})}),I&&(0,x.jsx)("div",{className:"booking-modal",children:(0,x.jsxs)("div",{className:"booking-modal-content",children:[(0,x.jsx)("span",{className:"close",onClick:me,children:"\xd7"}),y&&(0,x.jsx)("p",{children:y}),(0,x.jsx)("h2",{children:"Booking Details"}),(0,x.jsx)("label",{htmlFor:"checkInDate",children:"Check-in Date:"}),(0,x.jsx)("input",{type:"date",id:"checkInDate",value:J,onChange:function(e){return q(e.target.value)}}),(0,x.jsx)("label",{htmlFor:"checkOutDate",children:"Check-out Date:"}),(0,x.jsx)("input",{type:"date",id:"checkOutDate",value:L,onChange:function(e){return _(e.target.value)}}),(0,x.jsx)("button",{onClick:function(){console.log("Room:",D),console.log("Check-in Date:",J),console.log("Check-out Date:",L);var e=new Date(J),t=new Date(L);if(isNaN(e.getTime())||isNaN(t.getTime()))b("Please enter valid check-in and check-out dates.");else{var n=t.getTime()-e.getTime(),a=Math.ceil(n/864e5);if(a<=0)b("Check-out date should be after check-in date.");else{var r=D.price*a;Y(r),ue(!0),b(null)}}},children:"Confirm price"}),(0,x.jsx)("button",{onClick:function(){return ce(!0)},disabled:!oe,children:"Continue with payment"}),(0,x.jsxs)("p",{children:["Total Price: R",X]})]})}),se&&(0,x.jsx)("div",{className:"payment-modal",children:(0,x.jsxs)("div",{className:"payment-modal-content card-form",children:[(0,x.jsx)("span",{className:"close",onClick:function(){ce(!1),ue(!1),b(null)},children:"\xd7"}),(0,x.jsx)("h2",{children:"Payment Details"}),y&&(0,x.jsx)("p",{children:y}),(0,x.jsxs)("form",{children:[(0,x.jsxs)("div",{className:"form-group",children:[(0,x.jsx)("label",{htmlFor:"cardNumber",children:"Card Number:"}),(0,x.jsx)("input",{type:"text",id:"cardNumber",pattern:"[0-9]{13,19}",maxLength:"19",required:!0})]}),(0,x.jsxs)("div",{className:"form-group",children:[(0,x.jsx)("label",{htmlFor:"cardName",children:"Cardholder Name:"}),(0,x.jsx)("input",{type:"text",id:"cardName",pattern:"[A-Za-z\\s]+",maxLength:"50",required:!0})]}),(0,x.jsxs)("div",{className:"form-group",children:[(0,x.jsx)("label",{htmlFor:"expiryDate",children:"Expiry Date:"}),(0,x.jsx)("input",{type:"text",id:"expiryDate",pattern:"(0[1-9]|1[0-2])\\/[0-9]{2}",maxLength:"5",required:!0})]}),(0,x.jsxs)("div",{className:"form-group",children:[(0,x.jsx)("label",{htmlFor:"cvv",children:"CVV:"}),(0,x.jsx)("input",{type:"text",id:"cvv",pattern:"[0-9]{3,4}",maxLength:"4",required:!0})]}),(0,x.jsx)("button",{onClick:he,children:"Pay"})]})]})}),(0,x.jsx)(h.Z,{})]})}}}]);
//# sourceMappingURL=142.55687490.chunk.js.map